# TIL


## 1. Spring Cloud Stream ê°œìš”
- 7ì¥ ìŠ¤í”„ë§ MVCë¡œ ë§Œë“œëŠ” ì• í”Œë¦¬ì¼€ì´ì…˜  

Spring Cloud Streamì€ ë¶„ì‚° ì‹œìŠ¤í…œì—ì„œ ë©”ì‹œì§€ ê¸°ë°˜ ì• í”Œë¦¬ì¼€ì´ì…˜ì„ ì‰½ê²Œ ê°œë°œí•  ìˆ˜ ìˆë„ë¡ ì§€ì›í•˜ëŠ” í”„ë ˆì„ì›Œí¬ì´ë‹¤. Kafka, RabbitMQ ë“±ì˜ ë©”ì‹œì§€ ë¸Œë¡œì»¤ì™€ ì‰½ê²Œ í†µí•©í•  ìˆ˜ ìˆë„ë¡ ì§€ì›.

Spring Cloud Streamì—ì„œëŠ” ë©”ì‹œì§€ í”„ë¡œë“€ì„œ(Producer)ì™€ ì»¨ìŠˆë¨¸(Consumer)ë¥¼ `Supplier`, `Function`, `Consumer`ë¥¼ ì‚¬ìš©í•˜ì—¬ ì„ ì–¸ì ìœ¼ë¡œ ì •ì˜

---

## 2. ì£¼ìš” ê°œë…
### 1) Supplier (ê³µê¸‰ì)
- ë°ì´í„°ë¥¼ ìƒì„±í•˜ì—¬ ë©”ì‹œì§€ ë¸Œë¡œì»¤(Kafka, RabbitMQ ë“±)ì— ì „ì†¡í•˜ëŠ” ì—­í• 
- `@Bean`ìœ¼ë¡œ ì„ ì–¸ í›„, `application.yml`ì—ì„œ ë°”ì¸ë”© ê°€ëŠ¥

### 2) Function (ë³€í™˜ì)
- ì…ë ¥ì„ ë°›ì•„ì„œ ë³€í™˜ í›„ ì¶œë ¥í•˜ëŠ” ì—­í•  (ë°ì´í„° ê°€ê³µ ë° ì²˜ë¦¬)
- ë©”ì‹œì§€ë¥¼ ë°›ì•„ì„œ ë³€í™˜ í›„, ë‹¤ë¥¸ ì±„ë„ë¡œ ì „ì†¡ ê°€ëŠ¥

### 3) Consumer (ì†Œë¹„ì)
- ë©”ì‹œì§€ ë¸Œë¡œì»¤ì—ì„œ ë°ì´í„°ë¥¼ ë°›ì•„ ì²˜ë¦¬í•˜ëŠ” ì—­í• 
- ì™¸ë¶€ì—ì„œ ìƒì„±ëœ ë©”ì‹œì§€ë¥¼ ë°›ì•„ì„œ ì²˜ë¦¬

---

## 3. Spring Cloud Stream ì„¤ì • ë° ì‚¬ìš©ë²•

### 1) ì˜ì¡´ì„± ì¶”ê°€

#### ğŸ“Œ Maven
```xml
<dependency>
    <groupId>org.springframework.cloud</groupId>
    <artifactId>spring-cloud-starter-stream-kafka</artifactId>
</dependency>
```

#### ğŸ“Œ Gradle
```gradle
dependencies {
    implementation 'org.springframework.cloud:spring-cloud-starter-stream-kafka'
}
```

---

### 2) `application.yml` ì„¤ì • (Kafka ì˜ˆì œ)
```yaml
spring.cloud.bindings.reportPositions-out-0.destination=aircraftpositions
spring.cloud.bindings.reportPositions-out-0.binder=rabbit
```

---

### 3) Producer (ê³µê¸‰ì) - Supplier
```java
import org.springframework.context.annotation.Bean;
import org.springframework.stereotype.Component;
import java.util.function.Supplier;
import java.time.Instant;

@Component
public class MessageSupplier {

    @Bean
    public Supplier<String> supplier() {
        return () -> "Hello Kafka! Time: " + Instant.now();
    }
}
```

---

### 4) Processor (ë³€í™˜ì) - Function
```java
import org.springframework.context.annotation.Bean;
import org.springframework.stereotype.Component;
import java.util.function.Function;

@Component
public class MessageProcessor {

    @Bean
    public Function<String, String> function() {
        return message -> "Processed: " + message.toUpperCase();
    }
}
```

---

### 5) Consumer (ì†Œë¹„ì)
```java
import org.springframework.context.annotation.Bean;
import org.springframework.stereotype.Component;
import java.util.function.Consumer;

@Component
public class MessageConsumer {

    @Bean
    public Consumer<String> consumer() {
        return message -> System.out.println("Received: " + message);
    }
}
```

---

## 4. ì •ë¦¬

Spring Cloud Streamì„ ì‚¬ìš©í•˜ë©´ ë©”ì‹œì§• ì‹œìŠ¤í…œê³¼ ì†ì‰½ê²Œ í†µí•©í•  ìˆ˜ ìˆìœ¼ë©°, Kafka, RabbitMQ ë“± ë‹¤ì–‘í•œ ë©”ì‹œì§€ ë¸Œë¡œì»¤ë¥¼ í™œìš©í•œ ë¹„ë™ê¸° ë°ì´í„° ì²˜ë¦¬ë¥¼ ì‰½ê²Œ êµ¬í˜„í•  ìˆ˜ ìˆìŒ.